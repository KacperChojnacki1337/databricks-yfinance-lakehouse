# databricks.yml

bundle:
  name: yfinance-bronze-layer 

resources:
  jobs:
    bronze_ingestion:
      name: ${bundle.name}-01-bronze
      tasks:
        - task_key: bronze_task
          notebook_task:
            notebook_path: ./notebooks/01_bronze/Yfinance download
            parameters:
              env_name: ${var.env} # To jest kluczowa zmienna!
          timeout_seconds: 3600

---
# Definicja środowisk wdrożenia
targets:
  # Konfiguracja środowiska TEST
  TEST:
    host: ${{secrets.DATABRICKS_HOST}}      # Używamy TEGO SAMEGO hosta
    token: ${{secrets.DATABRICKS_TOKEN}}    # Używamy TEGO SAMEGO tokenu
    variables:
      env: TEST # Różnica JEST w tej zmiennej

  # Konfiguracja środowiska PROD
  PROD:
    host: ${{secrets.DATABRICKS_HOST}}      # Używamy TEGO SAMEGO hosta
    token: ${{secrets.DATABRICKS_TOKEN}}    # Używamy TEGO SAMEGO tokenu
    variables:
      env: PROD # Różnica JEST w tej zmiennej